<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="补完 Reaper 效率链的最后一环（三）Command Line 详解"><meta name="keywords" content=""><meta name="author" content="溪夜,undefined"><meta name="copyright" content="溪夜"><title>补完 Reaper 效率链的最后一环（三）Command Line 详解 | 溪夜的音频博客</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#概念与配置方法"><span class="toc-number">1.</span> <span class="toc-text">概念与配置方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么要用-Command-Line（命令行）？"><span class="toc-number">1.1.</span> <span class="toc-text">为什么要用 Command Line（命令行）？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看参数文档的方法"><span class="toc-number">1.2.</span> <span class="toc-text">查看参数文档的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加-Reaper-到环境变量"><span class="toc-number">1.3.</span> <span class="toc-text">添加 Reaper 到环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#功能详解"><span class="toc-number">1.4.</span> <span class="toc-text">功能详解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单实例"><span class="toc-number">2.</span> <span class="toc-text">简单实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#按需创建新的工程"><span class="toc-number">2.1.</span> <span class="toc-text">按需创建新的工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对文件进行效果链批处理"><span class="toc-number">2.2.</span> <span class="toc-text">对文件进行效果链批处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#更深的思考"><span class="toc-number">3.</span> <span class="toc-text">更深的思考</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通过-Python-修改-Batch-Processing-的文本文件"><span class="toc-number">3.1.</span> <span class="toc-text">通过 Python 修改 Batch Processing 的文本文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在命令行启动时调用-Action-或-ReaScript"><span class="toc-number">3.2.</span> <span class="toc-text">在命令行启动时调用 Action 或 ReaScript</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接下来讲什么？"><span class="toc-number">4.</span> <span class="toc-text">接下来讲什么？</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">溪夜</div><div class="author-info__description text-center">一位 Technical Sound Designer / Sound Engineer / iOS Music Maker / Gearslut / Synth-Lover / Extreme Metal Vocalist / Guitarist / LLer / 惠海人 / 明日香老缠粉 / 音频行业恐怖分子</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">21</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">2</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">1</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="https://sololand.moe/" target="_blank">zpan的独奏乡</a><a class="author-info-links__name text-center" href="http://jazzlost.me/" target="_blank">李AA的博客</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.cnn.com/cnnnext/dam/assets/170407220916-04-iconic-mountains-matterhorn-restricted.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">溪夜的音频博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/about">About Me</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a></span></div><div id="post-info"><div id="post-title">补完 Reaper 效率链的最后一环（三）Command Line 详解</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-09-28</time><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">3.2k</span><span class="post-meta__separator">|</span><span>阅读时长: 10 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>大家好，我是溪夜。<br>在《补完 Reaper 效率链的最后一环》专栏的第三篇中暂时先把 ReaScript 放到一边，分享一些其他的内容。<br>上篇文章的开头处曾谈到包括 Reaper、Wwise 和 LMB 都对 Command Line（命令行）有着使用支持。然而对于这部分功能的使用方法，<strong>少见的在 Reaper 帮助文档内居然一句未提</strong>，Cockos 论坛上也只有少数帖子有过相关讨论。<br><strong>作为冷门技巧爱好者，出于对 Reaper 文档欠缺部分的补充，我认为有必要详细聊一聊 Reaper 的 Command Line 用法及其扩展思路。</strong><br>注：本文使用的 Reaper 版本均基于 V6.14</p>
<blockquote>
<p>本系列文章阅读需要的前置知识：</p>
<ul>
<li>有 Python 基础。</li>
<li>对 macOS 终端、Windows 命令行等略有了解。</li>
<li>了解 Reaper 批处理的使用方法。</li>
</ul>
</blockquote>
<p>本文目录：</p>
<p>[toc]</p>
<h2 id="概念与配置方法"><a href="#概念与配置方法" class="headerlink" title="概念与配置方法"></a>概念与配置方法</h2><h3 id="为什么要用-Command-Line（命令行）？"><a href="#为什么要用-Command-Line（命令行）？" class="headerlink" title="为什么要用 Command Line（命令行）？"></a>为什么要用 Command Line（命令行）？</h3><p>为什么有好好的图形界面不用，非得要通过命令行来使用 Reaper？<br><strong>原因很简单：图形界面虽然对用户更友好，但命令行调用可提供更稳定、准确、快速的操作执行结果。</strong><br>这也是 Reaper 的伟大之处，一个完整的 DAW 愿意放下身段提供这样的底层使用方式。通过把一部分功能提取出来，可做到同时实现命令行的精准操作与 DAW 级别的后期处理。<br>要知道，FFMpeg 的功能是有限的。想通过它调用一串效果器来进行音频处理难以完成，此时 Reaper 的命令行用法就成了一个大杀器。<br>举个例子，通过简单的封装，可以把 Reaper 的效果器链批处理功能封装到音频管线中（就像暴雪在 TED 引擎里的用法），此时用户无需再面对 DAW 就能调用相关功能。</p>
<h3 id="查看参数文档的方法"><a href="#查看参数文档的方法" class="headerlink" title="查看参数文档的方法"></a>查看参数文档的方法</h3><p><strong>对于 Windows 和 macOS 来说，查看命令行使用帮助的方法相同。</strong>Linux 版暂不在本文的讨论范围之内，不过使用方法亦无太大差别。<br>可分别在命令行和终端中输入以下命令（需自行修改为自己的 Reaper 安装目录）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Windows: X:\YYY\ZZZ\reaper.exe -h</span><br><span class="line">Mac: /Applications/REAPER64.app/Contents/MacOS/REAPER -h</span><br></pre></td></tr></table></figure></p>
<p>执行之后可看到以下提示：<br><img src="/images/Reaper%20Windows-1.png" alt="Reaper Windows"><br>Windows<br><img src="/images/Reaper%20macOS-1.png" alt="Reaper macOS"><br>macOS<br>不难看出，命令行的用法为：<code>reaper（Reaper 安装路径） [options] [filename.rpp] [filename.wav]</code>，在 Windows 下横线“-”也可写为“/”。<br><strong>对比两者文档的区别，</strong>会发现 macOS 比 Windows 缺少 <code>-newinst</code>、<code>-nonewinst</code>、<code>-close</code> 这三个选项，且 Windows 具有一个独享的选项 <code>-noactive</code>，在之后的部分我们会聊一聊它们的用法。</p>
<h3 id="添加-Reaper-到环境变量"><a href="#添加-Reaper-到环境变量" class="headerlink" title="添加 Reaper 到环境变量"></a>添加 Reaper 到环境变量</h3><p><strong>每次都要先输一长串 Reaper 的安装路径再加指令，无疑是比较麻烦的。</strong><br>为此，可以把 Reaper 的安装目录添加到环境变量，之后即可直接在命令行中无需目录直接调用 Reaper。关于环境变量的配置方法在此不多加赘述，如有疑问可自行通过搜索引擎查找配置方法。<br>下面分别是 Windows 和 macOS 下配置截图及执行结果图：<br><img src="/images/Windows%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="Windows 环境变量"><br>Windows 环境变量设置<br><img src="/images/Windows%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%B5%8B%E8%AF%95.png" alt="Windows 环境变量测试"><br>在命令行中直接执行 <code>reaper -h</code> 可看到与之前相同的结果<br><img src="/images/macOS%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="macOS 环境变量"><br>macOS 环境变量设置<br><img src="/images/macOS%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%B5%8B%E8%AF%95-1.png" alt="macOS 环境变量测试"><br>在终端中直接执行 <code>reaper -h</code> 后也可看到相同的结果</p>
<h3 id="功能详解"><a href="#功能详解" class="headerlink" title="功能详解"></a>功能详解</h3><p>在开始实例之前，我们详细分析一下 Reaper 命令行工具所提供的功能。<strong>鉴于 Windows 版的功能更多，这部分的介绍以 Windows 版文档为准。</strong><br>在这里我把功能分为三大块。<br><strong>第一部分为单一的选项：</strong><br><code>-audiocfg</code>：在启动时打开 Preferences 中的 Audio Device 设置窗口<br><code>-cfgfile file.ini</code>：如果使用其他的资源文件夹需要完整路径，否则会使用默认路径<br><code>-new</code>：以新的工程启动<br><code>-template filename.rpp</code>：使用指定的模板工程开启 Reaper<br><code>-saveas newfilename.rpp</code>：当创建或加载完工程后，另存为指定名称的工程<br><code>-renderproject filename.rpp</code>：使用工程内保存的渲染设置来渲染指定工程<br><code>-ignoreerrors</code>：在加载时不会出现报错窗口<br><code>-nosplash</code>：静默加载，不显示开始画面<br><code>-splashlog /path/to/filename.log</code>：把开始画面中的信息写入到指定路径下的 Log 文件里<br><code>-newinst | -nonewinst</code>：是否创建新的 Reaper 实例（打开新的窗口而不是标签页），会忽略设置中对于新实例的检测设置<br><code>-close[all][:save|:nosave]</code>：关闭工程，可通过选项设置保存与否（无效）<br><strong>第二部分为批量转换文本文件中的语法格式：</strong><br><code>-batchconvert filelist.txt</code>：<br>在执行批处理时需使用一个 txt 文件来定义所有的配置。为了方便展示配置文本的内容，我使用代码块来展示配置文件的书写语法（为了写注释，这里使用 Python 格式渲染代码块），并且其中写入了可被使用的参数格式：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每行一个文件名（实际使用中需要额外添加路径）</span></span><br><span class="line">filename.wav</span><br><span class="line"><span class="comment"># 也可以每行一个文件名+制表符+输出文件名</span></span><br><span class="line">filename.wav(制表符分割)outputfile.wav</span><br><span class="line"><span class="comment"># 配置代码模块（可选）</span></span><br><span class="line">&lt;CONFIG</span><br><span class="line">  SRATE <span class="number">44100</span> <span class="comment"># 采样率</span></span><br><span class="line">  NCH <span class="number">2</span> <span class="comment"># 全局输出的通道数</span></span><br><span class="line">  RSMODE <span class="number">7</span> <span class="comment"># 重采样模式，0到9之间，需要在</span></span><br><span class="line">  DITHER <span class="number">3</span> <span class="comment"># 抖动处理模式，1为添加抖动，2为噪音塑形，3为两者协作</span></span><br><span class="line">  USESRCSTART <span class="number">1</span> <span class="comment"># 把 BWF 内的开始偏置信息应用到输出文件中</span></span><br><span class="line">  PAD_START <span class="number">1.0</span> <span class="comment"># 在开头增加静音段落，以秒为单位</span></span><br><span class="line">  PAD_END <span class="number">1.0</span> <span class="comment"># 在结尾增加静音段落，以秒为单位</span></span><br><span class="line">  OUTPATH <span class="string">'C:\output'</span> <span class="comment"># 设置批处理文件的输出目录</span></span><br><span class="line">  OUTPATTERN <span class="string">'$filenumber_$track'</span> <span class="comment"># 使用通配符定义输出文件名，如不设置则使用原文件名</span></span><br><span class="line">  FXCHAIN <span class="string">'chain1.RfxChain'</span> <span class="comment"># 使用效果器链</span></span><br><span class="line">  &lt;FXCHAIN <span class="comment"># 效果器链子模块，可把效果器链文件内的内容复制在这里，可避免每次都寻找效果器链文件的麻烦</span></span><br><span class="line">    WAK <span class="number">0</span> <span class="number">0</span></span><br><span class="line">    BYPASS <span class="number">0</span> <span class="number">0</span></span><br><span class="line">    &lt;VST <span class="string">"VST3: PAZ- Analyzer Stereo (Waves)"</span> <span class="string">"WaveShell1-VST3 11.0.vst3"</span> <span class="number">0</span> <span class="string">""</span> <span class="number">1462399732</span>&#123;<span class="number">5653545741455370617</span>A2D20616E616C&#125; <span class="string">""</span></span><br><span class="line">    XXXXXXX <span class="comment"># 此处省略效果器链文件内容，太长了</span></span><br><span class="line">  &gt;</span><br><span class="line">  &lt;OUTFMT <span class="comment"># 输出格式子模块，为 base64 格式的数据。可先保存好输出格式设置，之后用文本编辑器打开 .rpp 文件后在 RENDER_CFG 中找到对应的数据</span></span><br><span class="line">    bDNwbVAAAAAAAAAABQAAAP////<span class="number">8</span>EAAAAUAAAAAAAAAA=</span><br><span class="line">  &gt;</span><br><span class="line">  &lt;METADATA <span class="comment"># 元数据子模块，查找方法同上，在工程文件中搜索 RENDER_METADATA 中可找到对应的数据</span></span><br><span class="line">    (contents of &lt;RENDER_METADATA block <span class="keyword">from</span> project file)</span><br><span class="line">  &gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>第三部分为 Windows 独有的选项：</strong><br><code>-noactivate</code>：打开 Reaper 后并不前置窗口（无效）</p>
<h2 id="简单实例"><a href="#简单实例" class="headerlink" title="简单实例"></a>简单实例</h2><p>下面通过一些实例，体验一下命令行工具的应用。</p>
<h3 id="按需创建新的工程"><a href="#按需创建新的工程" class="headerlink" title="按需创建新的工程"></a>按需创建新的工程</h3><p>通过预先创建好的模板文件创建工程：<br><code>reaper -template C:\Users\xiye\AppData\Roaming\REAPER\ProjectTemplates\templates1.rpp</code><br><img src="/images/%E7%BB%93%E6%9E%9C1-2.png" alt="结果1"></p>
<p>通过预先创建好的模板文件创建工程并另存为 newfilename.rpp（默认另存为的位置为用户名文件夹下）：<br><code>reaper -template C:\Users\xiye\AppData\Roaming\REAPER\ProjectTemplates\templates1.rpp -saveas newfilename.rpp</code><br><img src="/images/%E7%BB%93%E6%9E%9C2-1.png" alt="结果2"></p>
<p>渲染刚创建的工程（轨道里已放入音频文件），默认生成的文件会与 Project - Render 设置里的路径相同，如果没指定文件名将会生成一个无名的 wave 文件：<br><code>reaper -renderproject C:\Users\xiye\newfilename.rpp</code><br><img src="/images/%E7%BB%93%E6%9E%9C3-2.png" alt="结果3"></p>
<h3 id="对文件进行效果链批处理"><a href="#对文件进行效果链批处理" class="headerlink" title="对文件进行效果链批处理"></a>对文件进行效果链批处理</h3><p>Reaper 的效果器链是个很棒的功能，<strong>不仅储存了效果器的名称、顺序，还储存了效果器当前所有的参数。</strong>在二次调用的时候非常方便，只需简单加载即可轻松复现之前的配置。<br>这个例子中，我们演示一下如何对一些 wav 文件通过效果器链进行批量渲染，示例目录中创建的结构如下，<strong>注意这个目录仅做演示，实际上音频文件、配置文件、输出文件夹可随意放在不同的文件夹中。</strong><br><img src="/images/%E7%A4%BA%E4%BE%8B%E5%B7%A5%E7%A8%8B.png" alt="示例工程"><br>其中有配置文件、输出文件夹及三个音频文件<br>首先创建一个配置文件 convert_setting.txt 供批处理使用（实际使用时需删除注释）：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要被处理的文件</span></span><br><span class="line">C:\Users\xiye\Desktop\TestAudio\<span class="number">1.</span>wavC:\Users\xiye\Desktop\TestAudio\<span class="number">2.</span>wavC:\Users\xiye\Desktop\TestAudio\<span class="number">3.</span>wav</span><br><span class="line"><span class="comment"># CONFIG 块</span>&lt;CONFIG  SRATE <span class="number">44100</span> <span class="comment"># 采样率</span>  NCH <span class="number">2</span> <span class="comment"># 通道数</span>  RSMODE <span class="number">9</span> <span class="comment"># 重采样模式</span>  DITHER <span class="number">3</span> <span class="comment"># 抖动模式</span>  PAD_START <span class="number">0.0</span> <span class="comment"># 不添加开始静默</span>  PAD_END <span class="number">0.0</span> <span class="comment"># 不添加结束静默</span></span><br><span class="line">  <span class="comment"># 以上的部分如果不想设置，其实不写也行 ：）</span></span><br><span class="line">  OUTPATH <span class="string">"C:\Users\xiye\Desktop\TestAudio\Output"</span> <span class="comment"># 输出路径设置为源文件目录下的子目录 Output</span>  OUTPATTERN <span class="string">""</span> <span class="comment"># 使用原文件名输出</span>  FXCHAIN <span class="string">"chain1.RfxChain"</span> <span class="comment"># 使用提前创建好的效果器链 chain1</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>提前创建好的效果器链 chain1 中，包括 ReaEQ 和 ReaVerb，并已设置了参数<br><img src="/images/chain1.png" alt="chain1"><br>chain1 的内容（图为加载后的效果，仅演示效果链的内容）<br>在命名行中执行以下命令:<br><code>reaper -batchconvert C:\Users\xiye\Desktop\TestAudio\convert_setting.txt</code><br>因为文件很少，可看到批处理窗口一闪而过：<br><img src="/images/%E6%89%B9%E9%87%8F%E5%A4%84%E7%90%86%E4%B8%AD.png" alt="批量处理中"><br>一闪而过的批处理窗口<br>执行结束后打开 Output 文件夹查看批处理后的音频文件，通过试听，发现已经完成了 EQ 与混响处理：<br><img src="/images/%E5%A4%84%E7%90%86%E5%90%8E.png" alt="处理后"><br>输出的文件<br>同时，TestAudio 文件夹中还创建了 Log 文件记录了操作日志：<br><img src="/images/%E6%93%8D%E4%BD%9C%E6%97%A5%E5%BF%97.png" alt="操作日志"><br>批处理日志</p>
<h2 id="更深的思考"><a href="#更深的思考" class="headerlink" title="更深的思考"></a>更深的思考</h2><h3 id="通过-Python-修改-Batch-Processing-的文本文件"><a href="#通过-Python-修改-Batch-Processing-的文本文件" class="headerlink" title="通过 Python 修改 Batch Processing 的文本文件"></a>通过 Python 修改 Batch Processing 的文本文件</h3><p>每次都人工修改批处理配置文件里的路径和参数，这对于聪明的用户绝对是难以忍受的。<strong>既然如此，不妨通过 Python 来完成这种繁琐的操作。</strong><br>举个实际使用时的例子，对于文件路径而言，完全可以写个函数获取目标路径内所有音频文件的完整路径，并修改到批处理配置文件内的对应位置。<br>在这里我们预先构建好一个 txt 文件作为模板，内容如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原始配置文件</span></span><br><span class="line">input_path&lt;CONFIG  SRATE <span class="number">44100</span>  NCH <span class="number">2</span>  RSMODE <span class="number">9</span>  DITHER <span class="number">3</span>  PAD_START <span class="number">0.0</span>  PAD_END <span class="number">0.0</span>  OUTPATH output_path  OUTPATTERN <span class="string">""</span>  FXCHAIN fx_chain&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改后的配置文件</span></span><br><span class="line">input_path&lt;CONFIG  SRATE sample_rate  NCH channels  RSMODE re_sample_mode  DITHER dither_mode  PAD_START pad_start  PAD_END pad_end  OUTPATH output_path  OUTPATTERN out_pattern  FXCHAIN fx_chain&gt;</span><br></pre></td></tr></table></figure></p>
<p>根据其中的内容，可利用字符串的 replace 方法，通过下面的函数对配置文件的内容进行修改：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 三个参数分别为读取后的配置文件，需要修改的字符串代号（如 input_path、fx_chain），修改后的字符串或数字</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">file_changer</span><span class="params">(setting_file, old_str, new_str)</span>:</span></span><br><span class="line">    file_data = <span class="string">""</span></span><br><span class="line">    <span class="comment"># 修改文件中的内容</span></span><br><span class="line">    <span class="keyword">with</span> open(file, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            <span class="keyword">if</span> old_str <span class="keyword">in</span> line:</span><br><span class="line">                line = line.replace(old_str, new_str)</span><br><span class="line">            file_data += line</span><br><span class="line">    <span class="comment"># 写入修改后的内容</span></span><br><span class="line">    <span class="keyword">with</span> open(file,<span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(file_data)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># 因为 input_path 肯定不会是单行，而是一大堆文本文件。所以在获取完文件路径后，需要用换行符把其分割开，写成：</span></span><br><span class="line">file_path = <span class="string">"path1\npath2\npath3"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="在命令行启动时调用-Action-或-ReaScript"><a href="#在命令行启动时调用-Action-或-ReaScript" class="headerlink" title="在命令行启动时调用 Action 或 ReaScript"></a>在命令行启动时调用 Action 或 ReaScript</h3><p><strong>如果想要在命令行调用 Reaper 的同时启动某个 Action 或脚本得怎么办？</strong><br>这在有些应用场景下可能是个刚需，例如在命令行创建工程后通过脚本让工程自行执行一些更复杂的初始化操作，然而命令行的语法中并没有跟这个功能有关的参数。<br><strong>其实很简单，有两个变通的方法可以解决这个需求。</strong><br>第一个方法，可以通过 SWS 中现有的脚本来做到：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置全局启动时加载的 Action 或脚本</span></span><br><span class="line">SWS/S&amp;M: Set <span class="keyword">global</span> startup action </span><br><span class="line"><span class="comment"># 设置工程启动时加载的 Action 或脚本</span></span><br><span class="line">SWS/S&amp;M: Set project startup action</span><br></pre></td></tr></table></figure></p>
<p>第二个方法，在 Reaper 资源路径的 Scripts 文件夹中通过创建名为 __startup.（后缀名可以是 eel 或 lua）的脚本，也可在启动时被加载（除非 Shift 键被按下），在 Reaper V5.3 之后均可使用。</p>
<h2 id="接下来讲什么？"><a href="#接下来讲什么？" class="headerlink" title="接下来讲什么？"></a>接下来讲什么？</h2><p>《补完 Reaper 效率链的最后一环》专栏除了分享有关 ReaScript 的知识外，<strong>还会分享一些我认为比较冷门的 Reaper 使用技巧。</strong><br>那些比较大路货的经验，本专栏默认读者通过各种视频和文章已掌握，所以我对书写文档和论坛中都比较冷门的技巧会更有兴趣。如果对大家有帮助，欢迎持续关注！</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">溪夜</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://xiye.art/2020/09/28/如何使用 ReaScript 进一步改善 Reaper 效率？（三）/">http://xiye.art/2020/09/28/如何使用 ReaScript 进一步改善 Reaper 效率？（三）/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://xiye.art" target="_blank">溪夜的音频博客</a>！</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/09/30/WAAPI 一文通（四）/"><i class="fa fa-chevron-left">  </i><span>人人都能用 WAAPI（四）Topics 类</span></a></div><div class="next-post pull-right"><a href="/2020/09/25/WAAPI 一文通（三）/"><span>人人都能用 WAAPI（三）wwise.ui、wwise.waapi、wwise.debug、soundengine 分支</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="lv-container" data-id="city" data-uid="MTAyMC80MDk4Ny8xNzUxMg=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2020 By 溪夜</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script src="/js/search/local-search.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>