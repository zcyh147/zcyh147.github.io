<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="WAAPI is for Everyone | Part 1 Overview"><meta name="keywords" content="音频编程"><meta name="author" content="溪夜,undefined"><meta name="copyright" content="溪夜"><title>WAAPI is for Everyone | Part 1 Overview | 溪夜的音频博客</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-Should-We-Use-WAAPI"><span class="toc-number">1.</span> <span class="toc-text">Why Should We Use WAAPI?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Have-You-Ever-Struggled-to-Work-More-Efficiently-When-Using-Wwise"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. Have You Ever Struggled to Work More Efficiently When Using Wwise?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-What’s-The-Point-of-Introducing-WAAPI"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. What’s The Point of Introducing WAAPI?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Aren’t-The-Official-Documents-Thorough-Enough"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. Aren’t The Official Documents Thorough Enough?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Learning-WAAPI-More-Efficiently-Using-Mind-Maps"><span class="toc-number">2.</span> <span class="toc-text">Learning WAAPI More Efficiently Using Mind Maps</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Summarizing-WAAPI-Essentials-With-Mind-Maps"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Summarizing WAAPI Essentials With Mind Maps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Importing-Into-the-Knowledge-Base-for-Further-Clarification"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. Importing Into the Knowledge Base for Further Clarification</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-I-Wrote-This-Blog-Series"><span class="toc-number">3.</span> <span class="toc-text">How I Wrote This Blog Series?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WAAPI-Basics"><span class="toc-number">4.</span> <span class="toc-text">WAAPI Basics</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-What-is-WAAPI"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. What is WAAPI?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Programming-Languages-and-Calling-Methods-Supported-by-WAAPI"><span class="toc-number">4.2.</span> <span class="toc-text">4.2. Programming Languages and Calling Methods Supported by WAAPI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Programming-Languages"><span class="toc-number">4.2.1.</span> <span class="toc-text">Programming Languages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Calling-Methods"><span class="toc-number">4.2.2.</span> <span class="toc-text">Calling Methods</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Configuring-the-Development-Environment"><span class="toc-number">4.3.</span> <span class="toc-text">4.3. Configuring the Development Environment</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Installing-Anaconda"><span class="toc-number">4.3.1.</span> <span class="toc-text">Installing Anaconda</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Configuring-Anaconda-and-Adding-the-waapi-client-Package-With-pip"><span class="toc-number">4.3.2.</span> <span class="toc-text">Configuring Anaconda and Adding the waapi-client Package With pip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Configuring-the-VS-Code-Development-Environment"><span class="toc-number">4.3.3.</span> <span class="toc-text">Configuring the VS Code Development Environment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Enabling-WAAPI-in-Wwise"><span class="toc-number">4.3.4.</span> <span class="toc-text">Enabling WAAPI in Wwise</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-Differences-Between-Execution-and-Subscription-APIs"><span class="toc-number">4.4.</span> <span class="toc-text">4.4. Differences Between Execution and Subscription APIs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-JSON-and-WAAPI-Documents"><span class="toc-number">4.5.</span> <span class="toc-text">4.5. JSON and WAAPI Documents</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#What-is-JSON"><span class="toc-number">4.5.1.</span> <span class="toc-text">What is JSON?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Arguments-and-Result-Execution-APIs"><span class="toc-number">4.5.2.</span> <span class="toc-text">Arguments and Result (Execution APIs)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#通过-ak-wwise-core-object-create-理解-JSON"><span class="toc-number">4.5.3.</span> <span class="toc-text">通过 ak.wwise.core.object.create 理解 JSON</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#如何把-JSON-的语法表格式化以方便阅读？"><span class="toc-number">4.5.4.</span> <span class="toc-text">如何把 JSON 的语法表格式化以方便阅读？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Topics（订阅类）中的参数为什么会有-Options-和-Publish？"><span class="toc-number">4.5.5.</span> <span class="toc-text">Topics（订阅类）中的参数为什么会有 Options 和 Publish？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-来一杯-Hello-Wwise！"><span class="toc-number">4.6.</span> <span class="toc-text">4.6. 来一杯 Hello Wwise！</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#确定使用哪个-API"><span class="toc-number">4.6.1.</span> <span class="toc-text">确定使用哪个 API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#实现代码"><span class="toc-number">4.6.2.</span> <span class="toc-text">实现代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#执行效果"><span class="toc-number">4.6.3.</span> <span class="toc-text">执行效果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WAAPI-两种应用（注释写到每一行）"><span class="toc-number">5.</span> <span class="toc-text">WAAPI 两种应用（注释写到每一行）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Functions（执行类）示例"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. Functions（执行类）示例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#不带参数"><span class="toc-number">5.1.1.</span> <span class="toc-text">不带参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#带参数"><span class="toc-number">5.1.2.</span> <span class="toc-text">带参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Topics（订阅类）"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. Topics（订阅类）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接下来讲什么？"><span class="toc-number">6.</span> <span class="toc-text">接下来讲什么？</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">溪夜</div><div class="author-info__description text-center">一个 Technical Sound Designer / Sound Engineer / iOS Music Maker / Gearslut / Synth-Lover / Extreme Metal Vocalist / Guitarist / LLer / 惠海人 / 明日香老缠粉 / 音频行业恐怖分子</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">23</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">9</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">1</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="https://sololand.moe/" target="_blank">zpan的独奏乡</a><a class="author-info-links__name text-center" href="http://jazzlost.me/" target="_blank">李AA的博客</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.cnn.com/cnnnext/dam/assets/170407220916-04-iconic-mountains-matterhorn-restricted.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">溪夜的音频博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/about">About Me</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a></span></div><div id="post-info"><div id="post-title">WAAPI is for Everyone | Part 1 Overview</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-11-14</time><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.4k</span><span class="post-meta__separator">|</span><span>阅读时长: 21 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>Hello. I’m Thomas Wang (also known as Xi Ye).<br>I discovered WAAPI (Wwise Authoring API) in the second half of last year. For a non-professional programmer like me, it was easy to get overwhelmed with new concepts like WAMP, JSON etc. Nevertheless, aside from the official documents, there are very few videos, articles and projects shared by other developers. Instead of asking for help, I tried to figure things out all by myself. And, I learned a lot.<br><strong>Linus Torvalds said:</strong></p>
<blockquote>
<p>In open source, we feel strongly that to really do something well, you have to get a lot of people involved.  — Linus Torvalds</p>
</blockquote>
<p><strong>Ideas are only valuable if you put them out to the world, right?</strong> So, with the open source spirit in mind, I decided to share this WAAPI guide series with you all. They are more like a complement to the official documents, yet more approachable and beginner friendly.<br>Being beginner friendly doesn’t mean that you have to start from scratch. Instead, with these guides, it will be easier as you venture into the world of WAAPI. <strong>The tool I’m using is Python, so our discussion will be based on that. Of course, you can use other programming languages supported by WAAPI to make remote calls (using C# to call WAAPI for instance).</strong></p>
<blockquote>
<p>This blog series assume that:</p>
<ul>
<li>You know how to configure the development environment, install and use Python, Anaconda, pip, VS Code, PyCharm etc.</li>
<li>You are familiar with basic Python syntax.</li>
<li>You have a comprehensive understanding of Wwise features.</li>
<li>You are eager to optimize the existing Wwise workflow.</li>
<li>You know something about mind maps.</li>
</ul>
</blockquote>
<p>Content:</p>
<p>[toc]</p>
<h2 id="Why-Should-We-Use-WAAPI"><a href="#Why-Should-We-Use-WAAPI" class="headerlink" title="Why Should We Use WAAPI?"></a>Why Should We Use WAAPI?</h2><h3 id="1-1-Have-You-Ever-Struggled-to-Work-More-Efficiently-When-Using-Wwise"><a href="#1-1-Have-You-Ever-Struggled-to-Work-More-Efficiently-When-Using-Wwise" class="headerlink" title="1.1. Have You Ever Struggled to Work More Efficiently When Using Wwise?"></a>1.1. Have You Ever Struggled to Work More Efficiently When Using Wwise?</h3><ul>
<li>Is it possible to reduce the click and drag &amp; drop operations?</li>
<li>How to create playback rules easily for hundreds or maybe even thousands of imported assets?</li>
<li>Can we automate the logic connection when using Game Syncs, Events or SoundBanks?</li>
<li>How to build a dynamic interaction between DAW and Wwise?</li>
<li>How to link the CI system to constantly optimize the integration pipeline?</li>
<li>etc.</li>
</ul>
<h3 id="1-2-What’s-The-Point-of-Introducing-WAAPI"><a href="#1-2-What’s-The-Point-of-Introducing-WAAPI" class="headerlink" title="1.2. What’s The Point of Introducing WAAPI?"></a>1.2. What’s The Point of Introducing WAAPI?</h3><p>If you have asked yourself any of the questions listed above, WAAPI would be a good answer.<br>As a great feature introduced in Wwise 2017.1, WAAPI is meant to execute repetitive tasks and streamline the workflow. Using WAAPI, you can do all kinds of operations such as retrieving project information, importing audio files, building container hierarchies, posting Events, setting Game Syncs etc. <strong>WAAPI is an essential tool for sound designers to optimize the Wwise workflow. It can save you a lot of time, allowing you to focus on the creative side of things.</strong><br>Many companies in the industry don’t have such a position like Game Audio Programmer or Technical Sound Designer. If you happen to be employed by one of them, this blog could be very helpful. <strong>The best way to streamline your workflow is constant optimization of repetitive tasks. Instead of waiting and wondering, let’s see how to actually do it.</strong></p>
<h3 id="1-3-Aren’t-The-Official-Documents-Thorough-Enough"><a href="#1-3-Aren’t-The-Official-Documents-Thorough-Enough" class="headerlink" title="1.3. Aren’t The Official Documents Thorough Enough?"></a>1.3. Aren’t The Official Documents Thorough Enough?</h3><p>Among all audio middlewares as far as I know, Wwise has the most thorough localized official documents. <strong>Yet, you still need some background tech knowledge to learn and use WAAPI.</strong> That’s why I wrote this blog series, hoping to make an useful complement to those documents. Meanwhile, there are great articles talking about WAAPI on the Audiokinetic blog. Enjoy reading them if you like.</p>
<h2 id="Learning-WAAPI-More-Efficiently-Using-Mind-Maps"><a href="#Learning-WAAPI-More-Efficiently-Using-Mind-Maps" class="headerlink" title="Learning WAAPI More Efficiently Using Mind Maps"></a>Learning WAAPI More Efficiently Using Mind Maps</h2><h3 id="2-1-Summarizing-WAAPI-Essentials-With-Mind-Maps"><a href="#2-1-Summarizing-WAAPI-Essentials-With-Mind-Maps" class="headerlink" title="2.1 Summarizing WAAPI Essentials With Mind Maps"></a>2.1 Summarizing WAAPI Essentials With Mind Maps</h3><p>As an important learning tool, mind maps inspired me tremendously in the past eight years.<br>As you can see, there are a wide variety of WAAPI APIs. It takes time for you to search them in the documents and find out which one does what. For instance, how do you know that you can use ak.wwise.core.object.get when you want to carry out API queries?<br><img src="/images/%E7%B9%81%E7%90%90%E7%9A%84API.png" alt="繁琐的API"></p>
<p>I was wondering if there is a better way to do this. And, bingo!<br>Creating mind maps came to my mind. How to summarize WAAPI essentials with mind maps? Let’s take ak.wwise.core.object.get for example.</p>
<ol>
<li>First, forget about the ak prefix. Then you divide the rest into three parts: wwise.core, object and get.</li>
<li>Then you sort all APIs by their features, using boxes to identify them.</li>
</ol>
<p><img src="/images/%E5%AF%BC%E5%9B%BE1.png" alt="导图1"><br>Global View</p>
<p><img src="/images/%E5%AF%BC%E5%9B%BE2.png" alt="导图2"><br>Local View</p>
<h3 id="2-2-Importing-Into-the-Knowledge-Base-for-Further-Clarification"><a href="#2-2-Importing-Into-the-Knowledge-Base-for-Further-Clarification" class="headerlink" title="2.2. Importing Into the Knowledge Base for Further Clarification"></a>2.2. Importing Into the Knowledge Base for Further Clarification</h3><p>Now we’ve built a basic logic system for learning WAAPI. Next, we need to import the information into MarginNote 3 for further clarification.<br><img src="/images/%E5%AF%BC%E5%9B%BE3.png" alt="导图3"><br>Here is how it looks in MN3</p>
<p>Now you can see the whole picture of WAAPI very clearly. More importantly, it provides you a better way to learn and use these APIs. This works for me, and maybe for you too. Certainly, you may choose any other tools that suit you better.<br><strong>I won’t show you all the mind maps that I created.</strong> You can make your own ones with the method mentioned previously. It shouldn’t be that difficult.If you are interested, you can redo what I just did. It doesn’t matter whether you choose MarginNote 3, XMind or something else. <strong>The most important thing is that you actually do it.</strong></p>
<h2 id="How-I-Wrote-This-Blog-Series"><a href="#How-I-Wrote-This-Blog-Series" class="headerlink" title="How I Wrote This Blog Series?"></a>How I Wrote This Blog Series?</h2><p>Now that you know how I summarized WAAPI essentials. Let’s talk about how I wrote this blog series.<br><strong>WAAPI APIs can be divided into two categories: execution (Functions) and subscription (Topics)</strong>. Based on this, I wrote this blog series.<br>(Note: Again, I left out the ak. prefix.)</p>
<ol>
<li>Overview</li>
<li>wwise.core (mainly execution APIs)</li>
<li>wwise.ui, wwise.debug, wwise.waapi</li>
<li>soundengine</li>
<li>wwise.core, wwise.debug, wwise.ui (subscription APIs)</li>
<li>Making Calls to WAAPI in the Game Engine</li>
<li>Examples</li>
</ol>
<h2 id="WAAPI-Basics"><a href="#WAAPI-Basics" class="headerlink" title="WAAPI Basics"></a>WAAPI Basics</h2><h3 id="4-1-What-is-WAAPI"><a href="#4-1-What-is-WAAPI" class="headerlink" title="4.1. What is WAAPI?"></a>4.1. What is WAAPI?</h3><p>WAAPI (Wwise Authoring API) is an essential module in Wwise. Through making calls to these APIs, you can tell Wwise to execute operations directly, without having to move the mouse or type with the keyboard.<br>These operations involve UIs (views, options, commands), core features (quickly adding audio files), sound engine (setting RTPC values, posting Events etc.). More information on WAAPI:<br><a href="https://www.audiokinetic.com/zh/library/edge/?source=SDK&amp;id=waapi.html" target="_blank" rel="noopener">https://www.audiokinetic.com/zh/library/edge/?source=SDK&amp;id=waapi.html</a></p>
<h3 id="4-2-Programming-Languages-and-Calling-Methods-Supported-by-WAAPI"><a href="#4-2-Programming-Languages-and-Calling-Methods-Supported-by-WAAPI" class="headerlink" title="4.2. Programming Languages and Calling Methods Supported by WAAPI"></a>4.2. Programming Languages and Calling Methods Supported by WAAPI</h3><h4 id="Programming-Languages"><a href="#Programming-Languages" class="headerlink" title="Programming Languages"></a>Programming Languages</h4><p>You can make WAAPI calls with a variety of languages such as C++, C#, JavaScript, Python etc. The last three are relatively easy for beginners. (Python 3.6+ is recommended.) If there is no need for making WAAPI calls within plug-ins, then you don’t have to use C++.</p>
<h4 id="Calling-Methods"><a href="#Calling-Methods" class="headerlink" title="Calling Methods"></a>Calling Methods</h4><p><strong>WAAPI provides three methods to make API calls: WAMP, HTTP POST and Wwise plug-ins.</strong><br>In most cases, we use WAMP. Because it’s the only one that support both execution and subscription APIs. <strong>So what is WAMP?</strong><br>It’s a method of communication via WebSocket. If you are unfamiliar with the principles of network communication, you can think of it as a method of transporting information over the network. To achieve this, you need an IP address and a port to connect to WAAPI.<br>You can execute the required operations only if your application is connected to Wwise via WAMP.<br>More information on how to make WAAPI calls:<br><a href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=waapi_gettingstarted.html" target="_blank" rel="noopener">https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=waapi_gettingstarted.html</a></p>
<h3 id="4-3-Configuring-the-Development-Environment"><a href="#4-3-Configuring-the-Development-Environment" class="headerlink" title="4.3. Configuring the Development Environment"></a>4.3. Configuring the Development Environment</h3><blockquote>
<p>Development environment is nothing new, so I’m not going to talk about it here. If you are interested, feel free to check the links below.</p>
</blockquote>
<p><strong>Since Conda doesn’t have the waapi-client package required by WAAPI, we have to install it manually. If you are not a fan of Anaconda, you can use pip instead.</strong><br>In case you are, it’s better to do it as described in the official document: first you install pip, then manage packages with pip within Anaconda. For more information, please check the links below.<br>(For advanced users only) You could use the conda skeleton pypi and conda build commands to install the package. But I never tried personally, so I will leave it to you.</p>
<h4 id="Installing-Anaconda"><a href="#Installing-Anaconda" class="headerlink" title="Installing Anaconda"></a>Installing Anaconda</h4><p><a href="https://docs.anaconda.com/anaconda/install/" target="_blank" rel="noopener">https://docs.anaconda.com/anaconda/install/</a></p>
<h4 id="Configuring-Anaconda-and-Adding-the-waapi-client-Package-With-pip"><a href="#Configuring-Anaconda-and-Adding-the-waapi-client-Package-With-pip" class="headerlink" title="Configuring Anaconda and Adding the waapi-client Package With pip"></a>Configuring Anaconda and Adding the waapi-client Package With pip</h4><p><a href="https://docs.anaconda.com/anaconda/user-guide/" target="_blank" rel="noopener">https://docs.anaconda.com/anaconda/user-guide/</a> <a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html#installing-non-conda-packages" target="_blank" rel="noopener">https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html#installing-non-conda-packages</a><br><strong>Note: With pip installed, you can run pip install waapi-client directly in Python 3.</strong></p>
<h4 id="Configuring-the-VS-Code-Development-Environment"><a href="#Configuring-the-VS-Code-Development-Environment" class="headerlink" title="Configuring the VS Code Development Environment"></a>Configuring the VS Code Development Environment</h4><p><a href="https://code.visualstudio.com/docs/python/environments" target="_blank" rel="noopener">https://code.visualstudio.com/docs/python/environments</a></p>
<h4 id="Enabling-WAAPI-in-Wwise"><a href="#Enabling-WAAPI-in-Wwise" class="headerlink" title="Enabling WAAPI in Wwise"></a>Enabling WAAPI in Wwise</h4><p><a href="https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=waapi_prepare.html" target="_blank" rel="noopener">https://www.audiokinetic.com/library/edge/?source=SDK&amp;id=waapi_prepare.html</a></p>
<h3 id="4-4-Differences-Between-Execution-and-Subscription-APIs"><a href="#4-4-Differences-Between-Execution-and-Subscription-APIs" class="headerlink" title="4.4. Differences Between Execution and Subscription APIs"></a>4.4. Differences Between Execution and Subscription APIs</h3><blockquote>
<p>Execution APIs execute certain operations, subscription APIs get the return result after that. They are referred to as “remote call” and “publish &amp; post” in the official Wwise documents.</p>
</blockquote>
<p><strong>Execution APIs：</strong><br>as their names suggest, all of these APIs are used to execute certain operations.<br>A specific operation will be executed after you make an API call. All those three methods are able to make execution API calls, although HTTP POST is not the best choice.<br><strong>Subscription APIs：</strong><br>When you make a subscription API call, your application will wait for Wwise to react. If you subscribed to an object creation action, you will get the return result only after that action is executed. Such calls are only possible with WAMP. They cannot be done via the other two methods.</p>
<h3 id="4-5-JSON-and-WAAPI-Documents"><a href="#4-5-JSON-and-WAAPI-Documents" class="headerlink" title="4.5. JSON and WAAPI Documents"></a>4.5. JSON and WAAPI Documents</h3><h4 id="What-is-JSON"><a href="#What-is-JSON" class="headerlink" title="What is JSON?"></a>What is JSON?</h4><p>People who’s not a professional programmer (like me) may wonder what JSON is when using WAAPI for the first time.<br><strong>JSON (JavaScript Object Notation) is a lightweight data-interchange format that uses human-readable text to store and transmit data objects.</strong> If you are familiar with XML, then you probably know something about JSON.<br>It’s important to know what JSON is. Because this format will be used for both input arguments and return values when making a remote call to WAAPI. <strong>Let’s find out the answer before we proceed.</strong> For further clarification, here is an example.</p>
<h4 id="Arguments-and-Result-Execution-APIs"><a href="#Arguments-and-Result-Execution-APIs" class="headerlink" title="Arguments and Result (Execution APIs)"></a>Arguments and Result (Execution APIs)</h4><p>Here is the <code>ak.wwise.core.object.create</code> doc in which there are two tables.<br><img src="/images/%E5%8F%82%E6%95%B01.png" alt="参数1"><br>Arguments<br><img src="/images/%E7%BB%93%E6%9E%9C1-1.png" alt="结果1"><br>Result</p>
<p>Both of them have three columns: Name, Type and Description.<br>You can use a function to pass in arguments and get the return result. <strong>In the Arguments table, these are the arguments that you want to pass in when making function calls. In the Result table, these are the result that you will get in return when it’s done.</strong><br>As mentioned previously, <strong>they are all in JSON format. Note that those with an asterisk (*) are mandatory arguments, the rest are optional ones.</strong><br>Let’s have a look at the Arguments table. There are three types of arguments:</p>
<ol>
<li><code>Name *</code> needs a single string as an argument to define the name. That means you only have to provide one name in string format for JSON to use. But why does <code>parent *</code> need four arguments? As you can see, the first one is <code>any of:</code>. That means you can choose any of the following three arguments to define the parent. They can be a name, a GUID or a path.</li>
<li>As for <code>notes</code>, it doesn’t have an asterisk. Because it’s not a mandatory argument. In other words, you can decide whether to pass in a note as needed when using <code>ak.wwise.core.object.create</code>.</li>
<li><code>children</code> 可能让大家产生疑问，为什么表示方法和前面不是一个模式。其实因为它是一个数组，需要传入的参数要写在数组内。所以必须的两项参数 <code>children[...].type *</code> 和 <code>children[...].name *</code> 中的 type 和 name 实际上是要写在数组当中的。</li>
</ol>
<p>对于 Result（结果）表来说，大多数情况下只要你能弄明白传入的 Arguments，一般都能猜出来会有什么返回值。比如当你使用 <code>create</code> 创建了一些对象，根据自然逻辑来判断， Wwise 应该会返回已创建的对象名称、GUID、层级信息。毕竟如果创建不成功肯定会报错，所以创建成功后应该返回刚创建的对象才符合逻辑。观察 Result 表后发现确实如此，的确是这三条返回值。</p>
<h4 id="通过-ak-wwise-core-object-create-理解-JSON"><a href="#通过-ak-wwise-core-object-create-理解-JSON" class="headerlink" title="通过 ak.wwise.core.object.create 理解 JSON"></a>通过 <code>ak.wwise.core.object.create</code> 理解 JSON</h4><p>在上小节中理解完文档中参数和返回值表格的含义后，你肯定会想，这些参数需要怎么写才能让 WAAPI 正确接收呢？<br>为此，我们看一下本功能所使用的参数与返回值在实际中的样子，它们就是以 JSON 格式定义的。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行 ak.wwise.core.object.create 所需的参数</span></span><br><span class="line">args = &#123;</span><br><span class="line">    <span class="string">"parent"</span>: parent_guid, </span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"Sound"</span>, </span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Simple_SFX"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行 ak.wwise.core.object.create 并传入 args 后获得的结果</span></span><br><span class="line">result = &#123;</span><br><span class="line">    <span class="string">"id"</span>: object_guid, </span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Simple_SFX"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>由例子可见，<strong>实际上 JSON 格式在 Python 中相当于一个字典。</strong>但与字典不同的是 JSON 内所有引号都需要使用双引号，而且 JSON 块应该为字符串类型。<strong>不过在 Python + WAAPI 的环境下似乎对这两条规则并没有进行严格校验</strong>，在使用过程中不必使用 Python 的 <code>json</code> 模块进行格式转换，直接按照字典格式书写也可正常工作。<br><img src="/images/%E5%AF%B9%E7%85%A7%E8%A1%A8.png" alt="对照表"><br>对照 Python 和 JSON 格式的对照表，亦可看出两者在数据结构上的对应关系。在使用 WAAPI 时这会是我们主要的操作对象，根据文档合理的设定参数才能获得我们想要的结果。</p>
<h4 id="如何把-JSON-的语法表格式化以方便阅读？"><a href="#如何把-JSON-的语法表格式化以方便阅读？" class="headerlink" title="如何把 JSON 的语法表格式化以方便阅读？"></a>如何把 JSON 的语法表格式化以方便阅读？</h4><p>WAAPI 的参数文档使用 JSON 来进行定义，这类格式的可读性非常不好。为了方便在使用 WAAPI 更清晰的参考各种参数。<strong>我们需要对其进行格式化，以把 JSON 彻底拆成方便阅读的形态。</strong><br>下面是 <code>create</code> 的传入参数语法：<br><img src="/images/%E5%8F%82%E6%95%B02.png" alt="参数2"></p>
<p>可读性非常的糟糕。<strong>在此我们使用 JSON 格式化工具进行操作，</strong>对于这个需求，个人习惯使用 JSON Editor（<a href="https://jsoneditoronline.org/）" target="_blank" rel="noopener">https://jsoneditoronline.org/）</a><br>还记得上图混乱的格式吗？用 JSON Editor 处理后会变的非常清晰！<br><img src="/images/JSON1.png" alt="JSON1"></p>
<p>当 Arguments 经过格式化后，可清晰看到 required 中注明了所需参数，properties 中提供了各种参数的类型和描述。下面还有两个属性。其中 <code>localDefinitions</code> 里实际就是上面提过的 <code>children</code> 里的定义，作为子类放进了这里。而 <code>patternProperties</code> 是通过 @propertyName 设置对象属性时可能出现的值的类型。</p>
<p><img src="/images/JSON2.png" alt="JSON2"></p>
<p>Result 经过格式化后也是一样，现在清晰可见其默认的三个返回值：GUID、创建的子对象、名称。在经过格式化后，JSON 无论是作为参数还是返回值来说都更易读了。<br><strong>当你想要调用某个 WAAPI 功能时，只需要在 JSON 的框架下依据文档修改所需的传入参数，再进行远程调用即可。</strong><br>如果想要清晰的理解 JSON 和参数之间对应的关系，一开始需要多阅读示例。我建议大家闲暇之余阅读 Wwise Authoring API Examples Index 中的所有例子。因其书写很简约，建议读透本文的描述再去阅读。<br>下面我们看一下参数的在完整程序中的用法。在官方文档中有个例子，功能是创建一个 Random Container 并且在其中同时创建两个 Sound SFX，这是它所提供 Arguments 的正确使用方法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 示例代码里提供的 Arguments</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"># 父级的 GUID、类型、名称、属性值</span></span><br><span class="line">    <span class="string">"parent"</span>: <span class="string">"&#123;7A12D08F-B0D9-4403-9EFA-2E6338C197C1&#125;"</span>, </span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"RandomSequenceContainer"</span>, </span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Boom"</span>, </span><br><span class="line">    <span class="string">"@RandomOrSequence"</span>: <span class="number">1</span>, </span><br><span class="line">    <span class="comment"># 子级新对象的名称与类型</span></span><br><span class="line">    <span class="string">"children"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"Sound"</span>, </span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"A"</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"Sound"</span>, </span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"B"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 真实应用情况下的 Arguments</span></span><br><span class="line"><span class="keyword">from</span> waapi <span class="keyword">import</span> WaapiClient, CannotConnectToWaapiException</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> WaapiClient() <span class="keyword">as</span> client:</span><br><span class="line">        <span class="comment"># 把 JSON 格式的 Arguments 赋值给 args</span></span><br><span class="line">        args = &#123;</span><br><span class="line">            <span class="string">"parent"</span>: <span class="string">"&#123;7A12D08F-B0D9-4403-9EFA-2E6338C197C1&#125;"</span>, </span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"RandomSequenceContainer"</span>, </span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"Boom"</span>, </span><br><span class="line">            <span class="string">"@RandomOrSequence"</span>: <span class="number">1</span>, </span><br><span class="line">            <span class="string">"children"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"type"</span>: <span class="string">"Sound"</span>, </span><br><span class="line">                    <span class="string">"name"</span>: <span class="string">"A"</span></span><br><span class="line">                &#125;, </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"type"</span>: <span class="string">"Sound"</span>, </span><br><span class="line">                    <span class="string">"name"</span>: <span class="string">"B"</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># 执行远程调用，第一个参数为 API 名，第二个为传入的 JSON 参数</span></span><br><span class="line">        client.call(<span class="string">"ak.wwise.core.object.create"</span>, args)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">except</span> CannotConnectToWaapiException:</span><br><span class="line">    print(<span class="string">"Could not connect to Waapi: Is Wwise running and Wwise Authoring API enabled?"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 3. 远程调用结束后控制台返回的结果，包括父级 GUID、父级容器名、子级 GUID、子级名称</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"id"</span>: <span class="string">"&#123;66666666-7777-8888-9999-AAAAAAAAAAAA&#125;"</span>, </span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Boom"</span>, </span><br><span class="line">    <span class="string">"children"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"id"</span>: <span class="string">"&#123;46813545-2168-3547-8328-681AB678D6F5&#125;"</span>, </span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"A"</span></span><br><span class="line">        &#125;, </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"id"</span>: <span class="string">"&#123;68465134-2548-2377-3541-321354318ABD&#125;"</span>, </span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"B"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Topics（订阅类）中的参数为什么会有-Options-和-Publish？"><a href="#Topics（订阅类）中的参数为什么会有-Options-和-Publish？" class="headerlink" title="Topics（订阅类）中的参数为什么会有 Options 和 Publish？"></a>Topics（订阅类）中的参数为什么会有 Options 和 Publish？</h4><p>如果你仔细看过文档，会发现 Topics 类中的参数有所不同，<strong>它们的文档中只有 Options 和 Publish，这两个新参数和 Functions 类的 Arguments、Result 有什么区别吗？</strong><br>其实意思差不多，大家要知道 <strong>Topics 类的功能实现是基于话题发布时被执行的回调函数。</strong>所以其中的 Options 用来定义在回调函数内的返回值类型，从而避免不必要的查询。而 Publish 可理解为 Result 的另一种形式，本质上还是用 JSON 格式返回信息，只不过返回的是被订阅话题被更改后所发布的信息。<br>另外，在 Functions 类中的也有特例，比如 <code>ak.wwise.core.audio.importTabDelimited</code>、<code>ak.wwise.core.object.get</code>、<code>ak.wwise.core.profiler.getBusses</code>、<code>ak.wwise.core.profiler.getVoices</code>，它们同时拥有 Arguments 和 Options，所以在使用的时候需要传入查询范围（Arguments）和查询选项（Options，可选）两个参数，这部分功能会在 <code>wwise.core</code> 分支再加以讨论。</p>
<h3 id="4-6-来一杯-Hello-Wwise！"><a href="#4-6-来一杯-Hello-Wwise！" class="headerlink" title="4.6. 来一杯 Hello Wwise！"></a>4.6. 来一杯 Hello Wwise！</h3><p>说了这么多理论，现在“麻烦给我的爱人来一杯 Hello Wwise 吧！”</p>
<h4 id="确定使用哪个-API"><a href="#确定使用哪个-API" class="headerlink" title="确定使用哪个 API"></a>确定使用哪个 API</h4><p>很明显，对于 Hello World 这种需求应该使用 Functions（执行类）完成。<br>通过寻找，我们发现一条美妙的 <code>ak.soundengine.postMsgMonitor</code> 可以完成需求。</p>
<h4 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h4><p>为了方便理解，我直接在代码里写上详细的注释，请大家对照每行的代码来阅读。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> waapi <span class="keyword">import</span> WaapiClient, CannotConnectToWaapiException</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 的异常处理 try…except… 语句，为 WAAPI 连接不上的情况增加了错误输出。</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 通过默认的地址连接 Wwise，如果想连接本地不同的 Wwise 可在这里修改对应的端口</span></span><br><span class="line">    <span class="keyword">with</span> WaapiClient() <span class="keyword">as</span> client:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># WAAPI 传入和传回的参数都使用 JSON 格式，我们使用字典定义一段要打印出的信息为 "Hello Wwise!"</span></span><br><span class="line">        print_args = &#123;</span><br><span class="line">            <span class="string">"message"</span>: <span class="string">"Hello Wwise!"</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># 远程调用 ak.soundengine.postMsgMonitor，并传入刚才设定好的参数</span></span><br><span class="line">        client.call(<span class="string">"ak.soundengine.postMsgMonitor"</span>, print_args)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> CannotConnectToWaapiException:</span><br><span class="line">    print(<span class="string">"Could not connect to Waapi: Is Wwise running and Wwise Authoring API enabled?"</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="执行效果"><a href="#执行效果" class="headerlink" title="执行效果"></a>执行效果</h4><p>运行脚本之前记住点击 Start Capture 来让 Profiler 开始采集信息。当脚本运行后，我们可获得以下信息：<br><img src="/images/%E7%BB%93%E6%9E%9C1.png" alt="结果1"><br>在 Logs 的 WAAPI 选项卡中，可看到产生了 WAMP 类型连接。</p>
<p><img src="/images/%E7%BB%93%E6%9E%9C2.png" alt="结果2"><code>children</code><br>在 Profiler 中可看到打印出的信息 “Hello Wwise!”</p>
<h2 id="WAAPI-两种应用（注释写到每一行）"><a href="#WAAPI-两种应用（注释写到每一行）" class="headerlink" title="WAAPI 两种应用（注释写到每一行）"></a>WAAPI 两种应用（注释写到每一行）</h2><h3 id="5-1-Functions（执行类）示例"><a href="#5-1-Functions（执行类）示例" class="headerlink" title="5.1. Functions（执行类）示例"></a>5.1. Functions（执行类）示例</h3><h4 id="不带参数"><a href="#不带参数" class="headerlink" title="不带参数"></a>不带参数</h4><p>通过 getInfo 功能获得当前工程的信息<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> waapi <span class="keyword">import</span> WaapiClient, CannotConnectToWaapiException</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># 略</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 通过默认的地址连接 Wwise</span></span><br><span class="line">    <span class="keyword">with</span> WaapiClient() <span class="keyword">as</span> client:</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 调用 ak.wwise.core.getInfo 来获取 Wwise 的全局信息并存到 result 中</span></span><br><span class="line">        result = client.call(<span class="string">"ak.wwise.core.getInfo"</span>)</span><br><span class="line">        <span class="comment"># 为了避免 print 单行打印，需通过 pprint 来打印刚得到 JSON 结果</span></span><br><span class="line">        pprint(result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> CannotConnectToWaapiException:</span><br><span class="line">    print(<span class="string">"Could not connect to Waapi: Is Wwise running and Wwise Authoring API enabled?"</span>)</span><br></pre></td></tr></table></figure></p>
<p>代码执行后结果如下，如所希望的返回了工程信息<br><img src="/images/%E7%BB%93%E6%9E%9C3-1.png" alt="结果3"></p>
<h4 id="带参数"><a href="#带参数" class="headerlink" title="带参数"></a>带参数</h4><p>请参考“来一杯 Hello Wwise！”的例子</p>
<h3 id="5-2-Topics（订阅类）"><a href="#5-2-Topics（订阅类）" class="headerlink" title="5.2. Topics（订阅类）"></a>5.2. Topics（订阅类）</h3><p>通过 ak.wwise.core.object.nameChanged 功能订阅工程中对象名称被修改时的信息，当有对象被修改时返回新、旧名字及设定的返回值类型（本例中为 type）<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> waapi <span class="keyword">import</span> WaapiClient, CannotConnectToWaapiException</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 的异常处理 try…except…else… 语句</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    client = WaapiClient()</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> CannotConnectToWaapiException:</span><br><span class="line">    print(<span class="string">"Could not connect to Waapi: Is Wwise running and Wwise Authoring API enabled?"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 建立 on_name_changed() 准备在订阅中作为回调函数，用来接收字典形式的返回参数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_name_changed</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># 获取对象类型</span></span><br><span class="line">        obj_type = kwargs.get(<span class="string">"object"</span>, &#123;&#125;).get(<span class="string">"type"</span>)</span><br><span class="line">        <span class="comment"># 获取之前的名字</span></span><br><span class="line">        old_name = kwargs.get(<span class="string">"oldName"</span>)</span><br><span class="line">        <span class="comment"># 获取新名字</span></span><br><span class="line">        new_name = kwargs.get(<span class="string">"newName"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 使用 format 格式化函数进行输出信息（其中的&#123;&#125;代表 format() 函数中的对应变量），告知用户XXX类型的对象从 A 改名到了 B</span></span><br><span class="line">        print(<span class="string">"Object '&#123;&#125;' (of type '&#123;&#125;') was renamed to '&#123;&#125;'\n"</span>.format(old_name, obj_type, new_name))</span><br><span class="line">        <span class="comment"># 执行完成后断开 WAMP 连接，当然，要是想一直监控信息也可以不断开</span></span><br><span class="line">        client.disconnect()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 订阅所需主题，传入回调函数，使用选项 type 以让名称修改时传回被修改的对象类型</span></span><br><span class="line">    handler = client.subscribe(<span class="string">"ak.wwise.core.object.nameChanged"</span>, on_name_changed, &#123;<span class="string">"return"</span>: [<span class="string">"type"</span>]&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印信息，提醒用户已经订阅了 ak.wwise.core.object.nameChanged 并建议用户执行重命名操作以验证脚本功能</span></span><br><span class="line">    print(<span class="string">"Subscribed 'ak.wwise.core.object.nameChanged', rename an object in Wwise"</span>)</span><br></pre></td></tr></table></figure></p>
<p>代码执行后结果如下，如所希望的告知了对象的名称变化及类型<br><img src="/images/%E7%BB%93%E6%9E%9C4.png" alt="结果4"></p>
<h2 id="接下来讲什么？"><a href="#接下来讲什么？" class="headerlink" title="接下来讲什么？"></a>接下来讲什么？</h2><p>在第二期中，会就执行类里比较重要的 wwise.core 分支进行分享。官网对于执行类的 API 大多提供了例子，但我可能会通过结合起来的小实例来进行演示，这样有便于大家更快掌握。如喜欢本文，请持续关注。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">溪夜</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://xiye.art/2020/11/14/WAAPI is for Everyone P1/">http://xiye.art/2020/11/14/WAAPI is for Everyone P1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://xiye.art" target="_blank">溪夜的音频博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/音频编程/">音频编程</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/11/19/PySimpleGUI 第二篇/"><i class="fa fa-chevron-left">  </i><span>写给声音设计师的极速 GUI 开发大法（二）进阶篇</span></a></div><div class="next-post pull-right"><a href="/2020/10/30/极简搭建（三）/"><span>极简搭建（三）空间音频试验场</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="lv-container" data-id="city" data-uid="MTAyMC80MDk4Ny8xNzUxMg=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2020 By 溪夜</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script src="/js/search/local-search.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>